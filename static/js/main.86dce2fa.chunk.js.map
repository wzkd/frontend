{"version":3,"sources":["config/config.js","App.js","reportWebVitals.js","index.js"],"names":["config","contract_address","App","useState","account","setAccount","amount","setAmount","supply","setSupply","isPrivate","setIsPrivate","isPublic","setIsPublic","ethers","utils","parseEther","price","setPrice","wlPrice","setWlPrice","isMinting","setIsMinting","isAllowed","setIsAllowed","merkleTree","setMerkleTree","useEffect","eth","window","ethereum","web3","Web3","wrapper","a","request","method","then","on","accounts","console","log","location","reload","mt","buildMerkleTree","getChainId","chainId","contract","Contract","build","abi","methods","totalSupply","call","s","p","wp","priv","pub","getAccounts","length","address","isAddress","proof","getHexProof","keccak256","allowed","onMintPublic","amt","toBN","publicMint","estimateGas","from","value","mul","send","mintOnReceipt","mintOnHash","mintOnError","estimateOnError","leafNodes","allowlist","map","addr","MerkleTree","sortPairs","getHexRoot","onMintPrivate","privateMint","err","errMsg","message","includes","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","code","hash","info","href","target","rel","receipt","success","updateSupply","onIncrement","onDecrement","onSelectAll","event","focus","select","onAmountChanged","className","onClick","onChange","type","renderSelector","style","marginBottom","renderMintingSoon","disabled","fromWei","renderPublicMint","renderPrivateMint","renderTotalSupply","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.86dce2fa.chunk.js","sourcesContent":["const config = {\n    1: {\n        contract_address: '0xa626F0c2d01281D9f82bfb47Eb39f5Ef66a92d17'\n    },\n    4: {\n        contract_address: '0x198A84955Ed779B74eBEf7Cb2DAb668c20388875'\n    }\n}\n\nexport default config;","import './App.css';\n// import Navbar from './components/Navbar';\nimport Web3 from \"web3\";\nimport { useEffect, useState } from 'react';\nimport build from \"./contracts/WZKD.json\";\nimport allowlist from \"./contracts/allowlist.json\";\nimport config from \"./config/config\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport {ethers} from \"ethers\";\nimport keccak256 from \"keccak256\";\nimport MerkleTree from \"merkletreejs\";\n\nfunction App() {\n  const [account, setAccount] = useState({});\n  const [amount, setAmount] = useState(1);\n  const [supply, setSupply] = useState(0);\n  const [isPrivate, setIsPrivate] = useState(false);\n  const [isPublic, setIsPublic] = useState(false);\n  const [price, setPrice] = useState(ethers.utils.parseEther(\"0.068\"));\n  const [wlPrice, setWlPrice] = useState(ethers.utils.parseEther(\"0.048\"));\n  const [isMinting, setIsMinting] = useState(false);\n  const [isAllowed, setIsAllowed] = useState(false);\n  const [merkleTree, setMerkleTree] = useState({});\n\n  useEffect(()=>{\n    const eth = window.ethereum;\n    const web3 = new Web3(eth);\n\n    const wrapper = async () => {\n      await eth.request({ method: 'eth_requestAccounts' });\n    }\n    wrapper().then(async ()=>{\n      try {\n        eth.on('accountsChanged', async (accounts) => {\n          console.log(accounts);\n        });\n        eth.on('chainChanged', () => {\n          window.location.reload();\n        });\n        const mt = buildMerkleTree();\n        setMerkleTree(mt);\n        const chainId = await web3.eth.getChainId();\n        const contract = new web3.eth.Contract(build.abi, config[chainId].contract_address);\n        const s = await contract.methods.totalSupply().call({})\n        setSupply(s);\n        console.log('SUPPLY');\n        const p = await contract.methods.price().call({});\n        setPrice(p);\n        console.log('PRICE');\n        const wp = await contract.methods.wlPrice().call({});\n        setWlPrice(wp);\n        console.log('WLPRICE');\n        const priv = await contract.methods.isPrivate().call({});\n        setIsPrivate(priv);\n        console.log('ISPRIVATE');\n        const pub = await contract.methods.isPublic().call({});\n        setIsPublic(pub);\n        console.log('ISPUBLIC');\n\n        // get address\n        let address;\n        const accounts = await web3.eth.getAccounts();\n        if (accounts.length > 0) address = accounts[0];\n        else if (Web3.utils.isAddress(accounts)) address = accounts;\n\n        const proof = mt.getHexProof(keccak256(address))\n        const allowed = await contract.methods.isAllowed(proof, address).call({});\n        setIsAllowed(allowed);\n        console.log('ISALLOWED', allowed);\n\n        setAccount({\n          web3,\n          chainId,\n          address,\n          contract,\n        });\n        // await updateSupplyCounter(c);\n      } catch(err) {\n        console.log(err)\n      }\n    })\n  }, []);\n\n  const onMintPublic = async () => {\n    const { contract, address } = account;\n    setIsMinting(true);\n\n    const amt = Web3.utils.toBN(amount);\n    const p = Web3.utils.toBN(price);\n    try {\n      await contract.methods.publicMint(amt).estimateGas({\n        from: address,\n        value: p.mul(amt)\n      });\n      contract.methods.publicMint(amt).send({\n        from: address,\n        value: p.mul(amt)\n      }).on('receipt', mintOnReceipt)\n      .on('transactionHash', mintOnHash)\n      .on('error', mintOnError);\n    } catch (err) {\n      estimateOnError(err)\n    }\n  }\n  function buildMerkleTree() {\n    const leafNodes = allowlist.map((addr) => keccak256(addr));\n    const merkleTree = new MerkleTree(leafNodes, keccak256, {\n      sortPairs: true,\n    });\n    console.log(merkleTree.getHexRoot())\n    return merkleTree;\n  }\n\n  const onMintPrivate = async () => {\n    const { contract, address } = account;\n    const proof = merkleTree.getHexProof(keccak256(address))\n    setIsMinting(true);\n\n    const amt = Web3.utils.toBN(amount);\n    const p = Web3.utils.toBN(wlPrice);\n    try {\n      await contract.methods.privateMint(amt, proof).estimateGas({\n        from: address,\n        value: p.mul(amt)\n      });\n      contract.methods.privateMint(amt, proof).send({\n        from: address,\n        value: p.mul(amt)\n      }).on('receipt', mintOnReceipt)\n      .on('transactionHash', mintOnHash)\n      .on('error', mintOnError);\n    } catch (err) {\n      estimateOnError(err)\n    }\n  }\n\n  const estimateOnError = (err) => {\n    let errMsg = `Error occurred ${err}`;\n    if(err.message.includes('Pausable: paused')) {\n      errMsg = 'Minting is paused';\n    }\n    toast.error(errMsg, {\n      position: \"bottom-center\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    });\n    setIsMinting(false);\n  }\n\n  const mintOnError = (error) => {\n    let errMsg = `error occurred ${error}`;\n    if(error.code === 4001) {\n      errMsg = 'Transaction rejected'\n    }\n    toast.error(errMsg, {\n      position: \"bottom-center\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    });\n    setIsMinting(false);\n  }\n\n  const mintOnHash = (hash) => {\n    toast.info(<a href={`https://etherscan.io/tx/${hash}`} target=\"_blank\" rel=\"noreferrer\">Processing your mint</a>, {\n      position: \"bottom-center\",\n      autoClose: 5000,\n      hideProgressBar: true,\n      closeOnClick: false,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n    })\n    setIsMinting(false);\n  };\n\n  const mintOnReceipt = (receipt) => {\n    toast.success('Minted!', {\n      position: \"bottom-center\",\n      autoClose: 5000,\n      hideProgressBar: false,\n      closeOnClick: true,\n      pauseOnHover: true,\n      draggable: true,\n      progress: undefined,\n      });\n      updateSupply();\n      setIsMinting(false);\n  }\n\n  const onIncrement = () => {\n    if(amount >= 20) return;\n    setAmount(amount+1);\n  }\n\n  const onDecrement = () => {\n    if(amount <= 1) return;\n    setAmount(amount-1);\n  }\n\n  const onSelectAll = event => {\n    event.target.focus();\n    event.target.select();\n  }\n\n  const onAmountChanged = event => {\n    const value = event.target.value;\n    if(value > 10) setAmount(10);\n    else if(value < 1) setAmount(1);\n    else setAmount(value);\n  }\n\n  const updateSupply = async () => {\n    const { contract } = account;\n    const s = await contract.methods.totalSupply().call({})\n    setSupply(s - 1);\n  }\n\n  const renderPublicMint = () => {\n    if(!isPublic) return;\n    return (<div>\n      <p className='title-text'>Public Mint</p>\n      <button onClick={onMintPublic} className='mint-btn' disabled={isMinting}>MINT FOR {\n        Web3.utils.fromWei(\n          Web3.utils.toBN(price).mul(Web3.utils.toBN(amount)), \n          \"ether\"\n          )} ETH</button>\n    </div>)\n  }\n\n  const renderPrivateMint = () => {\n    if(!isPrivate) return;\n    if(!isPublic && !isAllowed) return <p className='title-text' style={{marginBottom: '4vh'}}>You are not whitelisted</p>;\n    if(isAllowed) {\n      return (<div>\n        <p className='title-text'>Private Mint</p>\n        <button onClick={onMintPrivate} className='mint-btn' disabled={isMinting}>MINT FOR {\n          Web3.utils.fromWei(\n            Web3.utils.toBN(wlPrice).mul(Web3.utils.toBN(amount)), \n            \"ether\"\n            )} ETH</button>\n      </div>)\n    }\n  }\n\n  const renderSelector = () => {\n    if(!isPrivate && !isPublic) return;\n    return (<div className='selector-container'>\n      <button onClick={onDecrement} className='selector-btn'>-</button>\n      <input onClick={onSelectAll} onChange={onAmountChanged} value={amount} type=\"number\"/>\n      <button onClick={onIncrement} className='selector-btn'>+</button>\n      </div>)\n  }\n\n  const renderMintingSoon = () => {\n    if(isPrivate || isPublic) return;\n    return <p className='title-text' style={{marginBottom: '4vh'}}>Minting Soon</p>;\n  }\n\n  const renderTotalSupply = () => {\n    if(!isPrivate && !isPublic) return;\n    return <p className='supply-text'>{supply}/5678</p>;\n  }\n\n  return (\n    <div className='background'>\n      {/* <Navbar/> */}\n      <div className='mint-container'>\n        {renderSelector()}\n        {renderMintingSoon()}\n        {renderPublicMint()}\n        {renderPrivateMint()}\n        {renderTotalSupply()}\n      </div>\n        <ToastContainer />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}